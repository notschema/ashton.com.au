---
/**
 * Breadcrumb Component
 * Shows current location in site hierarchy
 */

interface Props {
  segments?: Array<{ label: string; href: string }>;
}

const { segments } = Astro.props;

// Auto-generate breadcrumbs from URL if not provided
const currentPath = Astro.url.pathname;
const pathSegments = currentPath.split("/").filter(Boolean);

const breadcrumbs = segments || [
  { label: "Home", href: "/" },
  ...pathSegments.map((segment, index) => {
    const href = "/" + pathSegments.slice(0, index + 1).join("/");
    const label = segment
      .split("-")
      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
      .join(" ");
    return { label, href };
  }),
];

// Don't show breadcrumbs on homepage
if (currentPath === "/") {
  return null;
}
---

<nav aria-label="Breadcrumb" class="mb-6">
  <ol class="flex items-center gap-2 text-sm text-muted-foreground">
    {
      breadcrumbs.map((crumb, index) => (
        <li class="flex items-center gap-2">
          {index > 0 && (
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="text-border"
            >
              <polyline points="9 18 15 12 9 6" />
            </svg>
          )}
          {index === breadcrumbs.length - 1 ? (
            <span class="text-foreground font-medium">{crumb.label}</span>
          ) : (
            <a
              href={crumb.href}
              class="hover:text-primary transition-colors underline decoration-transparent underline-offset-2 hover:decoration-inherit"
            >
              {crumb.label}
            </a>
          )}
        </li>
      ))
    }
  </ol>
</nav>
